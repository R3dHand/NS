<div *ngIf="searchResult">

    <!-- Expansion Panel -->
    <mat-accordion>
        <div *ngFor="let food of searchResult.foods">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{food.description}}
                    </mat-panel-title>
                    <mat-panel-description>
                        {{food.dataType}}
                    </mat-panel-description>
                </mat-expansion-panel-header>
                
                <!-- Tab Group for results -->
                <mat-tab-group animationDuration="2000ms">

                    <!-- Data Table -->
                    <mat-tab label="Data">
                        <div>
                            <mat-card>
                                <mat-card-title-group>
                                    <mat-card-subtitle>FDCID: {{ food.fdcId }}</mat-card-subtitle>
                                    <mat-card-subtitle>Data Type: {{ food.dataType }}</mat-card-subtitle>
                                    <mat-card-subtitle>Description: {{ food.description }}</mat-card-subtitle>
                                    <mat-card-subtitle>Lowercase Description: {{ food.lowercaseDescription }}</mat-card-subtitle>
                                    <mat-card-subtitle>Scientific Name: {{ food.scientificName }}</mat-card-subtitle>
                                    <mat-card-subtitle>Common Names: {{ food.commonNames }}</mat-card-subtitle>
                                    <mat-card-subtitle>Additional Descriptions: {{ food.additionalDescriptions }}</mat-card-subtitle>
                                    <mat-card-subtitle>NDB Number: {{ food.ndbNumber }}</mat-card-subtitle>
                                    <mat-card-subtitle>GTIN UPC: {{ food.gtinUpc }}</mat-card-subtitle>
                                    <mat-card-subtitle>Published Date: {{ food.publishedDate }}</mat-card-subtitle>
                                    <mat-card-subtitle>Brand Owner: {{ food.brandOwner }}</mat-card-subtitle>
                                    <mat-card-subtitle>Brand Name: {{ food.brandName }}</mat-card-subtitle>
                                    <mat-card-subtitle>Ingredients: {{ food.ingredients }}</mat-card-subtitle>
                                    <mat-card-subtitle>Market Country: {{ food.marketCountry }}</mat-card-subtitle>
                                    <mat-card-subtitle>Food Category: {{ food.foodCategory }}</mat-card-subtitle>
                                    <mat-card-subtitle>Modified Date: {{ food.modifiedDate }}</mat-card-subtitle>
                                    <mat-card-subtitle>Most Recent Aquisition Date: {{ food.mostRecentAquisitionDate }}</mat-card-subtitle>
                                    <mat-card-subtitle>Data Source: {{ food.dataSource }}</mat-card-subtitle>
                                    <mat-card-subtitle>Data Package Weight Source: {{ food.dataPackageWeightSource }}</mat-card-subtitle>
                                    <mat-card-subtitle>Serving Size Unit: {{ food.servingSizeUnit }}</mat-card-subtitle>
                                    <mat-card-subtitle>Serving Size: {{ food.servingSize }}</mat-card-subtitle>
                                    <mat-card-subtitle>All Highlighted Fields: {{ food.allHighlightFields }}</mat-card-subtitle>
                                    <mat-card-subtitle>Score: {{ food.score }}</mat-card-subtitle>
                                </mat-card-title-group>
                            </mat-card>
                        </div>
                    </mat-tab>
                    
                    <!-- Nutrients Table -->
                    <mat-tab label="Nutrients">
                        <table mat-table
                        class="mat-elevation-z8"
                        [dataSource]="food.foodNutrients">
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef=""> Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.nutrientName}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="value">
                                <th mat-header-cell *matHeaderCellDef=""> Value </th>
                                <td mat-cell *matCellDef="let element"> {{element.value}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="unit">
                                <th mat-header-cell *matHeaderCellDef=""> Unit </th>
                                <td mat-cell *matCellDef="let element"> {{element.unitName}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="source">
                                <th mat-header-cell *matHeaderCellDef=""> Source </th>
                                <td mat-cell *matCellDef="let element"> {{element.foodNutrientSourceDescription}} </td>
                            </ng-container>
            
                            <tr mat-header-row *matHeaderRowDef="nutrientsDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: nutrientsDisplayedColumns;"></tr>
                        </table>
                    </mat-tab>
                                        
                    <!-- finalFoodInputs Table -->
                    <mat-tab label="Final Food Inputs">
                        <table mat-table
                        class="mat-elevation-z8"
                        [dataSource]="food.finalFoodInputFoods">
                            <ng-container matColumnDef="id">
                                <th mat-header-cell *matHeaderCellDef=""> Id </th>
                                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="amount">
                                <th mat-header-cell *matHeaderCellDef=""> Amount </th>
                                <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="foodDescription">
                                <th mat-header-cell *matHeaderCellDef=""> Food Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.foodDescription}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="ingredientCode">
                                <th mat-header-cell *matHeaderCellDef=""> Ingredient Code </th>
                                <td mat-cell *matCellDef="let element"> {{element.ingredientCode}} </td>
                            </ng-container>            
            
                            <ng-container matColumnDef="ingredientDescription">
                                <th mat-header-cell *matHeaderCellDef=""> Ingredient Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.ingredientDescription}} </td>
                            </ng-container>
            
                            <ng-container matColumnDef="ingredientWeight">
                                <th mat-header-cell *matHeaderCellDef=""> Ingredient Weight </th>
                                <td mat-cell *matCellDef="let element"> {{element.ingredientWeight}} </td>
                            </ng-container>

                            <ng-container matColumnDef="portionCode">
                                <th mat-header-cell *matHeaderCellDef=""> Portion Code </th>
                                <td mat-cell *matCellDef="let element"> {{element.portionCode}} </td>
                            </ng-container>

                            <ng-container matColumnDef="portionDescription">
                                <th mat-header-cell *matHeaderCellDef=""> Portion Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.portionDescription}} </td>
                            </ng-container>

                            <ng-container matColumnDef="sequenceNumber">
                                <th mat-header-cell *matHeaderCellDef=""> sequence Number </th>
                                <td mat-cell *matCellDef="let element"> {{element.sequenceNumber}} </td>
                            </ng-container>

                            <ng-container matColumnDef="surveyFlag">
                                <th mat-header-cell *matHeaderCellDef=""> Survey Flag </th>
                                <td mat-cell *matCellDef="let element"> {{element.surveyFlag}} </td>
                            </ng-container>
                            
                            <ng-container matColumnDef="unit">
                                <th mat-header-cell *matHeaderCellDef=""> Unit </th>
                                <td mat-cell *matCellDef="let element"> {{element.unit}} </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="foodInputsDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: foodInputsDisplayedColumns;"></tr>
                        </table>
                    </mat-tab>
                </mat-tab-group>
            </mat-expansion-panel>
        </div>
    </mat-accordion>

        <!-- Pagination -->
    <app-pagination [totalHits]="searchResult.totalHits"
                    [totalPages]="searchResult.totalPages"
                    [currentPage]="searchResult.currentPage">
    </app-pagination>
</div>
